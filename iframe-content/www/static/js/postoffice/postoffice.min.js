!function(){"use strict";function n(){var n=null,r=null,t="",i="",o={};return o.$get=e,o.name=function(n){return arguments.length?(i=n,o):i},o.currentWindow=function(e){return arguments.length?(n=e,o):n},o.recipientWindow=function(n){return arguments.length?(r=n,o):r},o.recipientDomain=function(n){return arguments.length?(t=n,o):t},o}function e(n){function e(){r()}function r(){a.addEventListener("message",u)}function t(){a.removeEventListener("message",u)}function i(n){if(console.log("--- PostOffice:send ---"),console.log("message: ",n),console.log("_recipientDomain: ",l),console.log("_recipientWindow: ",d),!d)throw new Error("Error at PostOffice:send. The recipient window is potentially undefined.");d.postMessage(n,l)}function o(){return f}function s(){return g.promise}function c(n){var e="The "+n+" parameter is not defined";return e.concat(""!==f?" for the PostOffice named "+f+".":"."),e}function u(n){n.origin===l&&g.resolve()}var f=this.name,a=this.currentWindow,d=this.recipientWindow,l=this.recipientDomain,g=n.defer();if(!a)throw new Error(c("currentWindow"));if(!d)throw new Error(c("recipientWindow"));if(!l)throw new Error(c("domain"));var m={};return m.enable=r,m.disable=t,m.getName=o,m.getPromise=s,m.send=i,e(),m}angular.module("PostOffice",[]).provider("postOffice",n)}();