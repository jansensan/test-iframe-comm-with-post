!function(){"use strict";function n(){return{MESSAGE_SENT:"PostOffice:MESSAGE_SENT",RECIPIENT_CONFIRMATION_CONFIRMED:"PostOffice:RECIPIENT_CONFIRMATION_CONFIRMED",MESSAGE_RECEIVED:"PostOffice:MESSAGE_RECEIVED"}}function e(n,e){function i(n){if(!n)throw new Error("No config object was provided to initialize the PostOffice.");n.name&&(I=n.name),n.currentWindow&&(N=n.currentWindow),n.recipientWindow&&(O=n.recipientWindow),n.recipientDomain&&(w=n.recipientDomain),t()}function t(){if(!N)throw new Error(u("_currentWindow"));if(!O)throw new Error(u("_recipientWindow"));if(!w)throw new Error(u("_recipientDomain"));N.addEventListener("message",d)}function o(){N.removeEventListener("message",d)}function r(n){if(!O)throw new Error("Error at PostOffice:send: The recipient window is potentially undefined.");E(),O.postMessage(n,w)}function E(){n.$broadcast(e.MESSAGE_SENT)}function c(){}function f(){n.$broadcast(e.RECIPIENT_CONFIRMATION_CONFIRMED)}function a(i){n.$broadcast(e.MESSAGE_RECEIVED,{message:i})}function s(){return I}function u(n){var e="The "+n+" parameter is not defined";return e.concat(""!==I?" for the PostOffice named "+I+".":"."),e}function d(n){if(n.origin===w){if(n.data===e.RECIPIENT_CONFIRMATION_CONFIRMED)return void f();c(n.source),a(n.data)}}var I="",N=null,O=null,w="",_={};return _.init=i,_.disable=o,_.enable=t,_.send=r,_.getName=s,_}angular.module("PostOffice",[]).constant("PostOfficeEvents",n()).factory("postOffice",e)}();